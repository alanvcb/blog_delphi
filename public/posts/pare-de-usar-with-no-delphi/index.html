<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Pare de Usar With no Delphi | delphi.dev.br</title>
<meta name="keywords" content="delphi, clean-code">
<meta name="description" content="Um manifesto do Bruto do Delphi: por que o with √© o capeta disfar√ßado de atalho.">
<meta name="author" content="Bruto do Delphi">
<link rel="canonical" href="http://localhost:1313/posts/pare-de-usar-with-no-delphi/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fd5566c526ae48aadabd950798a2dc3568536401560eae5caac3765a42a9e7b5.css" integrity="sha256-/VVmxSauSKravZUHmKLcNWhTZAFWDq5cqsN2WkKp57U=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/pare-de-usar-with-no-delphi/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><link rel="stylesheet" href="/css/bruto.min.c31868396e2d623ffe58c59818d9ef98280f2b5465275af35de1a562c8a6b4e9.css" integrity="sha256-wxhoOW4tYj/&#43;WMWYGNnvmCgPK1RlJ1rzXeGlYsimtOk=">

</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="delphi.dev.br (Alt + H)">delphi.dev.br</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="In√≠cio">
                    <span>In√≠cio</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="Sobre">
                    <span>Sobre</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="Contato">
                    <span>Contato</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">
  <article class="post">
    <header class="post-header">
      <h1>Pare de Usar With no Delphi</h1>
      
    </header>

  <p class="bruto-saudacao-post"><strong>&#x1F920; Tarde Brutaiada! Sejam bem vindos a mais um post do Bruto do Delphi!</strong></p>

    <div class="post-content">
      






<div class="bruto-intro">
  <span><strong>WITH √© coisa de programador pregui√ßoso</strong></span>
</div>








<div class="bruto-bronca">
  <strong>Coice do Bruto:</strong> ‚ö†Ô∏è <em>Aviso de utilidade p√∫blica:</em><br>
Este texto √© <strong>opinativo</strong>, <strong>mal humorado</strong> e <strong>cheio de verdade</strong>.<br>
Se voc√™ ama o <code>with</code> e acha que ele √© lindo, j√° pode apertar <strong>Ctrl+W</strong> e fechar essa aba.<br>
Eu n√£o vou dormir menos, n√£o vou comer menos e n√£o vou te mandar flores.<br>
Agora, se voc√™ quer <strong>entender de verdade</strong> por que esse treco √© uma desgra√ßa no Delphi ‚Äî senta a√≠ e presta aten√ß√£o.<br>
Ou ent√£o, veja esse artigo em <a href="https://www.youtube.com/watch?v=9DQPkzb1hiw">v√≠deo</a>
</div>

<hr>
<h2 id="o-que-√©-esse-tal-de"><strong>O que √© esse tal de <code>with</code> e por que o povo usa</strong></h2>
<p>O <code>with</code> √© aquele ‚Äúatalho m√°gico‚Äù que promete te poupar <strong>meia d√∫zia de teclas</strong>.<br>
O sujeito olha praquilo e pensa:</p>
<blockquote>
<p>‚ÄúNossa, que lindo! N√£o preciso digitar <code>Memo1.Lines</code> toda hora!‚Äù</p>
</blockquote>
<p>Pois √©‚Ä¶ e depois n√£o entende <strong>por que o c√≥digo dele parece uma merda</strong>.</p>
<p>O <code>with</code> serve pra:</p>
<ul>
<li>‚ÄúEncurtar‚Äù chamadas (tipo <code>Memo1.Lines.Add</code>).</li>
<li>Preencher cole√ß√µes (tipo <code>ACBrNFe1.NotasFiscais.Add</code>).</li>
</ul>
<p>E serve tamb√©m pra <strong>bagun√ßar seu c√≥digo</strong>, <strong>confundir o depurador</strong> e <strong>te fazer parecer um pregui√ßoso</strong>.<br>
Bonito, n√©?</p>
<hr>







<div class="bruto-intro">
  <span>Problema #1 ‚Äî O <code>with</code> fode a leitura do seu c√≥digo</span>
</div>

<p>Sabe aquele c√≥digo bonito que voc√™ l√™ e entende de primeira?<br>
Pois √©, o <code>with</code> pega esse c√≥digo, limpa a bunda com ele e joga no lixo.</p>
<h3 id="exemplo-cl√°ssico-de-pregui√ßa"><strong>Exemplo cl√°ssico de pregui√ßa:</strong></h3>
<pre tabindex="0"><code class="language-pascal" data-lang="pascal">with Memo1.Lines do
begin
  Clear;
  Add(&#39;Cap√≠tulo 1: ...&#39;);
  Add(&#39;Par√°grafo 2: ...&#39;);
  Add(&#39;Par√°grafo 3: ...&#39;);
end;
</code></pre><p>O sujeito que escreveu isso acha que economizou tempo.<br>
Economizou nada, <strong>s√≥ fodeu</strong> quem vai dar manuten√ß√£o.</p>







<div class="bruto-bronca">
  <strong>Coice do Bruto:</strong> Aqui cada linha grita quem √© o dono da a√ß√£o.<br>
N√£o tem charada, n√£o tem adivinha√ß√£o.<br>
O c√≥digo √© <strong>honesto</strong> ‚Äî coisa rara hoje em dia.
</div>

<pre tabindex="0"><code class="language-pascal" data-lang="pascal">Memo1.Lines.Clear;
Memo1.Lines.Add(&#39;Cap√≠tulo 1: ...&#39;);
Memo1.Lines.Add(&#39;Par√°grafo 2: ...&#39;);
Memo1.Lines.Add(&#39;Par√°grafo 3: ...&#39;);
</code></pre><hr>







<div class="bruto-intro">
  <span>Problema #2 ‚Äî Debug com <code>with</code> √© a mesma coisa que tentar achar agulha num palheiro&hellip; s√≥ que o palheiro t√° pegando fogo</span>
</div>

<p>Quer depurar um trecho que usa <code>with</code>?<br>
Boa sorte, babaca. O depurador olha pro seu c√≥digo e pensa:</p>
<blockquote>
<p>‚ÄúAmigo, eu n√£o fa√ßo ideia de quem √© esse objeto a√≠.‚Äù</p>
</blockquote>
<h3 id="olha-essa-desgra√ßa"><strong>Olha essa desgra√ßa:</strong></h3>
<pre tabindex="0"><code class="language-pascal" data-lang="pascal">with ACBrNFe1.NotasFiscais.Add.NFe do
begin
  ide.cNF := &#39;12345678&#39;;
end;
</code></pre><p>Na hora de inspecionar <code>ide.cNF</code>, o compilador olha pra voc√™ e diz:</p>
<blockquote>
<p>‚ÄúN√£o sei quem √© <code>ide</code>, e sinceramente, tamb√©m n√£o quero saber.‚Äù</p>
</blockquote>
<p>A√≠ o cara tem que <strong>reconstruir toda a cadeia</strong> s√≥ pra ver um valorzinho.<br>
Tudo isso porque quis ‚Äúdigitar menos‚Äù.<br>
Parab√©ns, guerreiro do Ctrl+C Ctrl+V.</p>
<hr>







<div class="bruto-intro">
  <span>Problema #3 ‚Äî Voc√™ nem sabe mais o que est√° alterando</span>
</div>

<p>No <code>with</code>, voc√™ acha que est√° mexendo em um objeto, mas na verdade est√° <strong>atacando outro completamente diferente</strong>.<br>
√â o inferno em forma de sintaxe.</p>
<h3 id="o-caos-em-pessoa"><strong>O caos em pessoa:</strong></h3>
<pre tabindex="0"><code class="language-pascal" data-lang="pascal">with Nota do
begin
  with Det.Add do
  begin
    with Imposto do
    begin
      with ICMS do
      begin
        // Aqui ningu√©m sabe mais quem √© quem nesse caralho
      end;
    end;
  end;
end;
</code></pre><p><strong>Quem l√™ um c√≥digo desses merece um aumento‚Ä¶ ou uma interna√ß√£o.</strong></p>







<div class="bruto-bronca">
  <strong>Coice do Bruto:</strong> Aqui cada linha sabe <strong>quem √© o dono da bronca</strong>.<br>
E se der pau, o depurador sabe tamb√©m.
</div>

<pre tabindex="0"><code class="language-pascal" data-lang="pascal">var
  Nota: TNFe;
  Det: TDetCollectionItem;
begin
  Nota := ACBrNFe1.NotasFiscais.Add.NFe;
  Det  := Nota.Det.Add;

  Det.Imposto.ICMS.CST  := cst00;
  Det.Imposto.ICMS.orig := oeNacional;
end;
</code></pre><hr>







<div class="bruto-intro">
  <span>Como largar o v√≠cio do <code>with</code> (passo a passo de desintoxica√ß√£o)</span>
</div>

<ol>
<li>Descubra o tipo de retorno (Ctrl+Clique, pregui√ßoso).<br>
Exemplo: <code>NotasFiscais.Add.NFe : TNFe</code>.</li>
<li>Crie uma vari√°vel decente:
<pre tabindex="0"><code class="language-pascal" data-lang="pascal">var Nota: TNFe;
Nota := ACBrNFe1.NotasFiscais.Add.NFe;
</code></pre></li>
<li>Fez um <code>.Add</code>? Guarda o item:
<pre tabindex="0"><code class="language-pascal" data-lang="pascal">var Det: TDetCollectionItem;
Det := Nota.Det.Add;
</code></pre></li>
<li>D√™ <strong>nomes de gente</strong> pras vari√°veis.<br>
Nada de <code>a</code>, <code>b</code>, <code>obj</code>, <code>aux</code>. Nomeie direito.</li>
<li>Quebre o c√≥digo. C√≥digo bom √© <strong>aquele que at√© o estagi√°rio de marketing entende</strong>.</li>
</ol>
<hr>
<h2 id="exemplo-completo-sem-pregui√ßa"><strong>Exemplo completo (sem pregui√ßa)</strong></h2>
<pre tabindex="0"><code class="language-pascal" data-lang="pascal">uses
  ACBrNFe, ACBrNFeNotasFiscais;

procedure TForm1.GerarNFeClara;
var
  Nota: TNFe;
  Det: TDetCollectionItem;
begin
  Nota := ACBrNFe1.NotasFiscais.Add.NFe;

  Nota.Ide.cNF    := &#39;12345678&#39;;
  Nota.Ide.nNF    := 2;
  Nota.Ide.tpAmb  := taHomologacao;
  Nota.Ide.finNFe := fnNormal;

  Det := Nota.Det.Add;
  Det.nItem       := 1;
  Det.Prod.cProd  := &#39;ABC123&#39;;
  Det.Prod.xProd  := &#39;Produto Exemplo&#39;;
  Det.Prod.qCom   := 1.0000;
  Det.Prod.vUnCom := 100.00;

  Det.Imposto.ICMS.CST  := cst00;
  Det.Imposto.ICMS.orig := oeNacional;
end;
</code></pre>






<div class="bruto-bronca">
  <strong>Coice do Bruto:</strong> D√° mais trabalho? D√°.<br>
Mas pelo menos <strong>voc√™ entende o que escreveu</strong> ‚Äî e n√£o parece que um estagi√°rio b√™bado codou isso.
</div>

<hr>







<div class="bruto-intro">
  <span>Checklist do Bruto para banir o <code>with</code></span>
</div>

<ul>
<li><input checked="" disabled="" type="checkbox"> Declare vari√°veis decentes.</li>
<li><input checked="" disabled="" type="checkbox"> Quebre cadeias longas.</li>
<li><input checked="" disabled="" type="checkbox"> Nomeie as coisas direito.</li>
<li><input checked="" disabled="" type="checkbox"> Fa√ßa o debug funcionar sem reza brava.</li>
<li><input checked="" disabled="" type="checkbox"> E se algu√©m usar <code>with</code> no seu projeto&hellip; <strong>refatora sem d√≥ e demita o respons√°vel</strong>.</li>
</ul>
<hr>







<div class="bruto-intro">
  <span>‚ÄúMas Bruto, eu digito menos com <code>with</code>&hellip;‚Äù</span>
</div>

<p>E eu digito menos ainda se eu deletar seu c√≥digo inteiro.<br>
Digitar menos n√£o √© meta de programador.<br>
<strong>Entender o que escreveu √©.</strong></p>
<hr>







<div class="bruto-intro">
  <span>Conclus√£o</span>
</div>

<p>O <code>with</code> √© a <strong>muleta dos pregui√ßosos</strong>.<br>
√â o <em>‚Äújeitinho brasileiro‚Äù</em> aplicado √† programa√ß√£o.<br>
Quer ser bom? Escreve direito. Quer ser r√°pido? Usa snippet.</p>







<div class="bruto-bronca">
  <strong>Coice do Bruto:</strong> Mas se continuar defendendo <code>with</code>, <strong>n√£o me chama pra dar manuten√ß√£o</strong> no seu c√≥digo, porque eu vou arrancar esse neg√≥cio de l√° nem que seja na marra.<br>
Se voc√™ √© do time <code>with</code>, √≥timo ‚Äî <strong>s√≥ n√£o me chame pra manuten√ß√£o.</strong> Se me chamar, eu vou l√° e <strong>arranco esse v√≠cio do seu c√≥digo sem d√≥.</strong>
</div>

<blockquote>
<p>E se achou tudo isso uma besteira&hellip;<br>
T√° bom tamb√©m.<br>
Eu continuo dormindo bem e o <code>with</code> continua sendo uma bosta. üòé</p>
</blockquote>

    </div>
  </article>

    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">delphi.dev.br</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
